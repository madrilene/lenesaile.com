---
title: 'Sobre subgrid y l칤neas coloreadas'
description: 'Para m칤, subgrid siempre fue lo que me faltaba para integrar realmente grid en mis flujos de trabajo. En este art칤culo intento construir un prototipo de una que requiere un dise침o de cuatro columnas con l칤neas coloreadas.'
discover:
  description: 'En este art칤culo, intento crear un prototipo de un dise침o que requiere una maquetaci칩n a cuatro columnas con l칤neas coloreadas, utilizando subgrid'
category: blogpost
key: 'subgrid'
date: 2023-11-15 15:20:00
lastEdit: 2023-11-16 11:25:00
codepen: true
---

Para m칤, la subgrid siempre fue lo que me faltaba para integrar realmente grid en mis flujos de trabajo.

Con [CSS grid](https://developer.mozilla.org/en-US/docs/Web/CSS/grid), las "pistas de fila" y "columna" creadas en un grid s칩lo pueden utilizarse para posicionar a los hijos directos del grid contenedora. Subgrid permite compartir todos los valores definidos en el grid antepasado.

En lugar de definir expl칤citamente los nombres de las l칤neas y las funciones de dimensionamiento de las pistas, utilizamos la palabra clave `subgrid` como valor de `grid-template-columns` o `grid-template-rows` para heredar la pista del grid m치s cercana.

Por ejemplo, un grid cl치sica de 12 columnas podr칤a ser creada como padre para toda la p치gina, y entonces podemos organizar nuestros elementos dentro de ella, sin importar lo profundamente anidados que est칠n. Puede consultar la [compatibilidad actual del navegador con CSS Subgrid en caniuse.com](https://caniuse.com/?search=subgrid).

{% include "partials/toc.njk" %}

## Preparaci칩n

Tengo un dise침o para un nuevo proyecto que parece hecho para Subgrid: La p치gina est치 dividida en cuatro columnas dentro de un wrapper. Las cuatro columnas est치n visiblemente divididas por l칤neas verticales de 1px de ancho que van desde la parte superior de la p치gina hasta la parte inferior. Todos los elementos y contenidos se alinean directamente con estas l칤neas, algunos contenidos se reparten en varias columnas, otros s칩lo empiezan en una l칤nea espec칤fica del grid.

### Configuraci칩n del HTML

He escrito el siguiente HTML para el protot칤po:

{% raw %}

```html
<body>
  <div class="wrapper">
    <header class="landmark">
      <a href="#" class="logo"> Biscuit! </a>
      <svg><!-- ... --></svg>
    </header>
    <main class="landmark">
      <article class="chocolate">
        <h2>Chocolate cake</h2>
        <p>Cookie tart cake cotton candy chocolate chocolate.</p>
        <section>
          <h3>Jelly beans</h3>
          <p>
            Jelly beans gummi bears halvah halvah croissant lemon drops donut gummi bears
            candy canes. Icing sugar plum chupa chups jelly-o souffl칠 jelly-o pudding
            lollipop. Chocolate bar muffin bonbon pie tootsie roll danish bear claw
            cheesecake.
          </p>
        </section>
        <section>
          <h3>Cheesecake</h3>
          <p>Powder halvah souffl칠 caramels souffl칠 chocolate cake halvah.</p>
        </section>
        <section>
          <!-- ... -->
        </section>
        <section>
          <!-- ... -->
        </section>
      </article>
    </main>
    <footer class="landmark">
      <p>
        Diving into subgrid. Created and maintained by
        <a href="#">Lene</a>
      </p>
      <nav>
        <ul role="list">
          <li>
            <a href="#" class="link-rss">RSS Feed</a>
          </li>
          <li>
            <a href="#" class="link-rss">Follow</a>
          </li>
        </ul>
      </nav>
      <p>Crafted with semantic HTML.</p>
    </footer>
  </div>
</body>
```

{% endraw %}

### El sistema de grid principal

Primero, defino las dimensiones para El wrapper.

```css
.wrapper {
  inline-size: clamp(16rem, 93vw, 120rem);
  margin-inline: auto;
  position: relative;
}
```

Este wrapper es para dar cabida a mi sistema de grid en toda la p치gina. Sin embargo, quiero dejar mi clase envoltorio intacta, s칩lo debe ocuparse de lo que su nombre implica.

Mi elemento `<body>` tiene un elemento `child` directo, mi wrapper. Utilizo este selector para definir el s칤stema grid por separado (una nueva clase con el nombre correspondiente tambi칠n ser칤a una opci칩n).

```css
body > div {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
}
```

El wrapper se divide ahora en cuatro columnas del mismo tama침o, que se colocan directamente una al lado de la otra sin espacio entre ellas.

{% codepen "https://codepen.io/madrilene/pen/yLZoZgE", "result" %}
subgrid con l칤neas: por defecto
{% endcodepen %}

El wrapper tiene tres elementos `child`, que ahora se colocan cada uno en las tres primeras columnas. Este es su comportamiento natural ya que son elementos `child` de un grid y se dividen a s칤 mismos en los carriles disponibles.

### Activar subgrid

Quiero que los tres hitos conserven el grid padre para s칤 mismos.

**춰Activemos subgrid!**

```css
:is(header, main, footer).landmark {
  display: grid;
  grid-template-columns: subgrid;
}
```

Esto no funciona todav칤a. Puedo ver en las herramientas de desarrollo que la subgrid est치 activo, pero los tres todav칤a est치n atrapados en una columna.

{% imagePlaceholder "./src/assets/images/blog/subgrid-devtools.jpg", "", "", "", "Fragmento del DOM de las herramientas de desarrollo de Firefox. Muestra el elemento body del documento y su elemento hijo, un div con clase wrapper. Los tres 'landmarks' header, main y footer est치n subordinados a 칠ste. El wrapper est치 etiquetado como grid, los tres 'landmarks' como subgrid.", "Captura de pantalla de la pesta침a inspector de las herramientas para desarrolladores de Firefox" %}

Esto se debe a que siguen siendo elementos `hijos` directos del s칤stema grid padre.

En cambio, quiero que ocupen todo el ancho del wrapper y, por tanto, especificar칠 exactamente qu칠 columnas del grid principal deben ocupar:

```css
:is(header, main, footer).landmark {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
}
```

{% codepen "https://codepen.io/madrilene/pen/zYeEJKw", "result" %}
subgrid con lineas: subgrid activada
{% endcodepen %}

Ahora nuestros tres puntos de referencia se apoderan del grid antecesora y colocan a sus propios hijos en ella. S칩lo `<main>` se extiende por todas las columnas, pero a칰n as칤 s칩lo ordena sus elementos en la primera columna. Llegaremos a eso en un momento.

Si echo un vistazo a las herramientas de desarrollo, tambi칠n puedo ver que se han creado tres filas autom치ticamente.

Merece la pena echar un vistazo a las herramientas de desarrollo del grid: En Firefox, cuando la p치gina contiene un grid con un subgrid, la entrada de la subgrid aparece sangrada bajo su principal en la secci칩n del grid superpuesta.

{% imagePlaceholder "./src/assets/images/blog/subgrid-devtools-details.jpg", "", "", "", "Captura de pantalla que muestra las casillas de verificaci칩n del grid superpuesta y los ajustes de visualizaci칩n del grid para hacer visibles las l칤neas de un subgrid o del grid principal. El grid envolvente est치 seleccionado.", "Captura de pantalla de las herramientas para desarrolladores de Firefox: Panel CSS, vista Dise침o, secci칩n grid" %}

{% aside %}Si quieres saber m치s sobre esto: [Firefox docs for the CSS Grid Inspector, chapter "Examine grid layouts"](https://firefox-source-docs.mozilla.org/devtools-user/page_inspector/how_to/examine_grid_layouts/index.html).{% endaside %}

## Colocaci칩n de elementos en el grid

Por defecto, los elementos hijo se colocan en la primera l칤nea disponible del grid

### header

Por ahora no tengo que preocuparme del elemento `anchor` en el `<header>`.
Pero de acuerdo con el dise침o, el SVG debe alinearse con la cuarta l칤nea del grid. Logro esto alineando generalmente a la 칰ltima l칤nea de la columna:

```css
header.landmark svg {
  grid-column-start: -1;
}
```

### main

Mientras que `<main>` es un subgrid, su hijo `<article>` no lo es: el entorno de flujo por defecto est치 en su lugar. Por alguna raz칩n tuve la sensaci칩n de que deber칤a usar los valores de subgrid con moderaci칩n. Pero en realidad no hay ninguna raz칩n para ello. As칤 que convierto todos los elementos `<article>` que son hijos directos de `<main>` en subgrids tambi칠n.

```css
main.landmark > article {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
}
```

{% aside %}Debe tenerse en cuenta que los elementos de art칤culo seleccionados _no_ son subgrids de `<main>`, sino siempre del elemento antepasado m치s cercano que defina una plantilla de columna que _no_ sea subgrid. Esa es nuestro wrapper, seleccionada mediante `body > div`.{% endaside %}

Mirando el dise침o, el t칤tulo y el p치rrafo del `<article>` no deben colocarse en el flujo normal del grid, sino que cada uno ocupa su propia fila dentro de la primera columna. Hago que el p치rrafo ocupe su propia fila dentro de la misma columna.

```css
main.landmark > article > p {
  grid-row: 2;
}
```

Las secciones de `<main>` est치n distribuidas en diferentes columnas en el dise침o del escritorio. Ahora las coloco expl칤citamente en la fila y columna que se les ha asignado. En nuestro ejemplo, s칩lo hay secciones dentro de `main.landmark`, pero teniendo en cuenta la compatibilidad futura, `<main>` dar치 cabida a m치s elementos `<article>` en un HTML m치s extendido.

```css
article.work > section:first-of-type {
  grid-column: 2 / -1;
  grid-row: 3;
}

article.work > section:nth-of-type(2) {
  grid-column: 3 / -1;
  grid-row: 4;
}

article.work > section:nth-of-type(3) {
  grid-column: span 1 / -1;
  grid-row: 5;
}

article.work > section:last-of-type {
  grid-column: 3 / -1;
  grid-row: 6;
}
```

### footer

Tambi칠n quiero colocar elementos en su propia fila en el `<footer>`. Puedo definir esta fila extra directamente en el landmark, y adem치s del subgrid definido anteriormente, obtiene su propio valor `grid-template-rows`.

{% aside %}춰Ten en cuenta que tambi칠n se pueden crear subgrids para `grid-template-rows`!
No llegar칠 tan lejos en este ejemplo, pero es muy 칰til para crear elementos que necesitan su propio dise침o de filas repetidas dentro de su columna asignada.{% endaside %}

Se supone que el primer elemento hijo se extender치 sobre dos columnas y filas, el men칰 y el 칰ltimo pragrafo se alinear치n uno debajo del otro a la derecha.

```css
footer.landmark {
  grid-template-rows: repeat(2, auto);
}

footer.landmark p:first-of-type {
  grid-column: span 2;
  grid-row: 1 / -1;
}

footer.landmark p:last-of-type,
footer.landmark nav {
  grid-column: span 2 / -1;
  place-self: end;
}
```

`repeat(2, auto)` significa que habr치 dos filas en el grid, y ambas deber치n tener la misma altura, determinada din치micamente en funci칩n de su contenido.
auto" indica que la altura de las filas se ajustar치 autom치ticamente a su contenido.

{% codepen "https://codepen.io/madrilene/pen/qBgXwrK", "result" %}
subgrid con l칤neas: colocando elementos
{% endcodepen %}

## L칤neas del grid coloreadas

Nuestros elementos est치n alineados, pasemos a la parte que a priori parece sencilla: las columnas de nuestra maquetaci칩n deben estar marcadas por l칤neas divisorias de colores. 쯅o puedo simplemente colorear las l칤neas del grid?

Mi idea original en realidad era, a침adir de alguna manera un color a las l칤neas del grid de la columna en El wrapper en el fondo.

Eso no funciona. Puedo mostrar las l칤neas en las herramientas de desarrollo, pero no parece que tenga una manera de abordar realmente estas l칤neas con un color, usando CSS. Sin embargo, he encontrado algunos enfoques en la naturaleza (En otras palabras: Stack Overflow, tambi칠n me atrev칤 a preguntar Chat GTP, pero eso fue completamente in칰til). Los enfoques no fueron creados con subgrid en mente, pero intentarlo no hace da침o.

### Idea 1: A침adir un hueco y un color de fondo del grid principal

Intentemos a침adir un `gap` de 1px y un `background-color` pardel grid principal.

```css
body > div {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  background-color: blue;
  gap: 1px;
}
```

A continuaci칩n, se asigna a las subgrids el color de fondo predeterminado.

```css
:is(header, main, footer).landmark,
main.landmark > article {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
  background-color: white;
}
```

{% codepen "https://codepen.io/madrilene/pen/WNPEPwE", "result" %}
subgrid con lineas: gap y color de fondo
{% endcodepen %}

Bueno, eso s칩lo funcion칩 a medias. Las filas creadas intr칤nsecamente del grid principal son de color azul, pero como los contenedores de la subgrid abarcan todas las columnas, los huecos ya no son visibles.

### Idea 2: border-color

쯇uedo asignar un borde a todos los elementos del grid?

```css
body > div > * {
  border-inline-start: 1px solid blue;
}

body > div > *:last-of-type {
  border-inline-end: 1px solid blue;
}
```

Ahora mi grid principal tiene un borde a la derecha y a la izquierda, porque son las zonas que no est치n superpuestas.

쯏 si repito esto para las subgrids?

```css
:is(header, main, footer).landmark > *,
main.landmark > article > * {
  border-inline-start: 1px solid blue;
}

:is(header, main, footer).landmark > *:last-of-type,
main.landmark > article > *:last-of-type {
  border-inline-end: 1px solid blue;
}
```

Ahora tengo un caos de l칤neas verticales, dobladas a los lados, porque el borde s칩lo se aplica donde hay elementos.

{% codepen "https://codepen.io/madrilene/pen/xxMLQQr", "result" %}
subgrid con lineas: borde
{% endcodepen %}

### Idea 3: background-image: linear-gradient

Con este planteamiento, me despido del intento de dirigirme directamente del grid.

Record칠 que podr칤a colocar un [patr칩n CSS](https://projects.verou.me/css3patterns/#vertical-stripes) repetido en el fondo, ya que las cuatro columnas son totalmente uniformes. Esto ser칤a como una capa gr치fica que s칩lo intenta replicar las columnas de mi grid.

Tras un poco de ensayo y error, me decid칤 por esta variante:

```css
body > div {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  background-image: linear-gradient(to right, blue 1px, transparent 1px);
  background-size: 24.95%;
  background-repeat: repeat;
}
```

Eso es establecer un gradiente lineal para la propiedad `background-image`, creando un patr칩n repetitivo de una l칤nea azul de 1 p칤xel sobre un fondo transparente, y cubriendo el 24,95% del ancho del contenedor. Perd칩n por el n칰mero aleatorio (tambi칠n llamado "[n칰mero m치gico](<https://es.wikipedia.org/wiki/N%C3%BAmero_m%C3%A1gico_(inform%C3%A1tica)>)", como he aprendido de [Christopher Kirk-Nielsen](https://mastodon.social/@chriskirknielsen/111416719319408777)).

{% codepen "https://codepen.io/madrilene/pen/ExrvBYa", "result" %}
subgrid con lineas: linear-gradient
{% endcodepen %}

Es algo "hacky" y ligeramente fuera, pero lo suficientemente bueno por ahora. Estoy bastante seguro de que todav칤a voy a cambiarlo, ya que no produce un buen resultado en todos los viewport.

Esta no es una soluci칩n satisfactoria - Espero que alguien va a venir con una idea mejor y h치gamelo saber acerca de 칠l 游땳

Es bastante "hacky" y muestra una clara desviaci칩n del grid en los dispositivos m칩viles. Estoy bastante segura de que todav칤a voy a cambiarlo, ya que no produce un resultado agradable en cada viewport.
De hecho, espero que a alguien se le ocurra una idea mejor y me la comunique 游땳.

## Actualizaci칩n: Ideas de la comunidad CSS

Compart칤 el art칤culo en Mastodon y, como esperaba, gente con talento aport칩 nuevas ideas! 游꿀

### linear-gradient sin n칰mero m치gico

[Christopher Kirk-Nielsen](https://chriskirknielsen.com/) se encarg칩 de mi problema con los n칰meros m치gicos, transformando mi soluci칩n en una mucho m치s limpia:

```css
body > div {
  --cols: 4;
  --line-size: 1px;
  display: grid;
  grid-template-columns: repeat(var(--cols), 1fr);
  background-image: linear-gradient(to right, blue var(--line-size), transparent 0);
  background-size: calc((100% - var(--line-size)) / var(--cols));
}
```

Puso el n칰mero de columnas y el `line-width` en variables y calcul칩 el ancho deseado a partir de ah칤. Lo bueno es que ahora hay una relaci칩n entre eg grid y el patr칩n, y podemos ajustar din치micamente el grosor de la l칤nea (`--line-size`), y el n칰mero de columnas (`--cols`) - se aplicar치n tanto para el sistema de grid subyacente como para las l칤neas visibles.

{% codepen "https://codepen.io/chriskirknielsen/pen/JjxOGEr", "result" %}
subgrid con l칤neas: linear-gradient (sin n칰mero m치gico)
{% endcodepen %}

Eso es fant치stico, gracias! 游눜

### Pseudoelementos

[Roma Komarov](https://kizu.dev/) ha a침adido la idea de crear elementos vac칤os adicionales como marcadores de posici칩n y pseudoelementos como l칤neas de grid.

Roma aplica pseudoelementos CSS antes de los hijos del elemento `<article>` y despu칠s del propio elemento `<article>`.

```css
article > *::before,
article::after {
  contenido: '';
  position: absolute;
  /* Omitir intencionadamente el inset-inline, utilizando la posici칩n "inicial" de estos elementos */
  inset-block: 0;
  anchura: 1px;
  color de fondo: azul;
  z-index: -1;
}

article::after {
  derecha: 0;
}
```

Roma observa que este m칠todo genera m치s l칤neas de las necesarias: cuando hay elementos que empiezan en las mismas l칤neas del grid, se solapan, lo que se hace visible al a침adir un valor de `opacity`:

```css
article > *::before,
article::after {
  /* todas las dem치s declaraciones CSS */
  opacidad: 0.1;
}
```

{% codepen "https://codepen.io/kizu/pen/MWLOaxW", "result" %}
subgrid con l칤neas: pseudo-elementos
{% endcodepen %}

Me encanta esta idea, 춰gracias! 游눜

Roma recomienda colocar elementos vac칤os en el grid, ya que cualquier cambio en las posiciones actuales de los hijos de `<article>` en el grid puede hacer desaparecer las l칤neas. Vamos a hacer esto en la siguiente secci칩n.

### Marcadores de posici칩n implementados, vista m칩vil

Tom칠 la idea de Roma e implement칠 los marcadores de posici칩n en otro codepen, y tambi칠n a침ad칤 un media query para la mayor칤a de los elementos colocados en la rejilla, para hacerlos abarcar todo el ancho en dispositivos m칩viles (y conseguir que las l칤neas "funcionen" tambi칠n en viewports peque침os).

No quiero aburrir a nadie y no voy a repetir todos los ajustes CSS aqu칤, si quieres saber los detalles, echa un vistazo al Codepen:

{% codepen "https://codepen.io/madrilene/pen/NWowaov", "result" %}
subgrid con lineas: pseudo-elementos, placeholders y media query
{% endcodepen %}

## M치s sobre subgrid

1. Cl치sico: [mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_grid_layout/Subgrid)
2. Rachel Andrew con grandes ejemplos en su [art칤culo para 12 Days of Web, edici칩n 2022](https://12daysofweb.dev/2022/css-subgrid/)
3. [Art칤culo en web.dev](https://web.dev/articles/css-subgrid), basado en la idea de un grid "macro" a nivel de p치gina
4. Se pueden encontrar grandes ejemplos de subgrid en [gridbyexample.com](https://gridbyexample.com/examples/#css-grid-level-2-examples)
5. ["Learn CSS Subgrid"](https://ishadeed.com/article/learn-css-subgrid/) por Ahmad Shadeed
6. [Michelle Barker introduce subgrid](https://www.youtube.com/watch?v=tueTFd2TQUA&t=2266s) en su "Creative CSS Layout" en CSS Day 2022 (YouTube)
7. .. y un libro: [CSS - The Definitive Guide](https://www.oreilly.com/library/view/css-the-definitive/9781098117603/)

Mi compa침ero se ri칩 cuando me vio sentado delante del ordenador con un libro t칠cnico, de la vieja escuela. En realidad, aqu칤 es donde primero miro cuando quiero aprender o saber algo sobre CSS. Hay m치s de 80 p치ginas s칩lo sobre dise침o de cuadr칤cula, y lo recomiendo encarecidamente. Por supuesto, no es barato y ocupa una cantidad notablemente grande de espacio en la estanter칤a.

{% imagePlaceholder "./src/assets/images/blog/css-definitive-guide-grid.jpg", "", "", "", "El libro CSS - The Definitive Guide yace abierto en mi escritorio en un cap칤tulo sobre subgrid, con mi teclado detr치s. " %}
