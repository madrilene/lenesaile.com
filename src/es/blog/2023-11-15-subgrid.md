---
title: 'Sobre subgrid y l√≠neas coloreadas'
description: 'Para m√≠, subgrid siempre fue lo que me faltaba para integrar realmente grid en mis flujos de trabajo. En este art√≠culo intento construir un prototipo de una que requiere un dise√±o de cuatro columnas con l√≠neas coloreadas.'
discover:
  description: 'En este art√≠culo, intento crear un prototipo de un dise√±o que requiere una maquetaci√≥n a cuatro columnas con l√≠neas coloreadas, utilizando subgrid'
category: blogpost
key: 'subgrid'
date: 2023-11-15 15:20:00
lastEdit: 2023-11-23 09:50:00
codepen: true
---

Para m√≠, la subgrid siempre fue lo que me faltaba para integrar realmente grid en mis flujos de trabajo.

Con [CSS grid](https://developer.mozilla.org/en-US/docs/Web/CSS/grid), las "pistas de fila" y "columna" creadas en un grid s√≥lo pueden utilizarse para posicionar a los hijos directos del grid contenedora. Subgrid permite compartir todos los valores definidos en el grid antepasado.

En lugar de definir expl√≠citamente los nombres de las l√≠neas y las funciones de dimensionamiento de las pistas, utilizamos la palabra clave `subgrid` como valor de `grid-template-columns` o `grid-template-rows` para heredar la pista del grid m√°s cercana.

Por ejemplo, un grid cl√°sica de 12 columnas podr√≠a ser creada como padre para toda la p√°gina, y entonces podemos organizar nuestros elementos dentro de ella, sin importar lo profundamente anidados que est√©n. Puede consultar la [compatibilidad actual del navegador con CSS Subgrid en caniuse.com](https://caniuse.com/?search=subgrid).

{% include "partials/toc.njk" %}

## Preparaci√≥n

Tengo un dise√±o para un nuevo proyecto que parece hecho para Subgrid: La p√°gina est√° dividida en cuatro columnas dentro de un wrapper. Las cuatro columnas est√°n visiblemente divididas por l√≠neas verticales de 1px de ancho que van desde la parte superior de la p√°gina hasta la parte inferior. Todos los elementos y contenidos se alinean directamente con estas l√≠neas, algunos contenidos se reparten en varias columnas, otros s√≥lo empiezan en una l√≠nea espec√≠fica del grid.

### Configuraci√≥n del HTML

He escrito el siguiente HTML para el protot√≠po:

{% raw %}

```html
<body>
  <div class="wrapper">
    <header class="landmark">
      <a href="#" class="logo"> Biscuit! </a>
      <svg><!-- ... --></svg>
    </header>
    <main class="landmark">
      <article class="chocolate">
        <h2>Chocolate cake</h2>
        <p>Cookie tart cake cotton candy chocolate chocolate.</p>
        <section>
          <h3>Jelly beans</h3>
          <p>
            Jelly beans gummi bears halvah halvah croissant lemon drops donut gummi bears
            candy canes. Icing sugar plum chupa chups jelly-o souffl√© jelly-o pudding
            lollipop. Chocolate bar muffin bonbon pie tootsie roll danish bear claw
            cheesecake.
          </p>
        </section>
        <section>
          <h3>Cheesecake</h3>
          <p>Powder halvah souffl√© caramels souffl√© chocolate cake halvah.</p>
        </section>
        <section>
          <!-- ... -->
        </section>
        <section>
          <!-- ... -->
        </section>
      </article>
    </main>
    <footer class="landmark">
      <p>
        Diving into subgrid. Created and maintained by
        <a href="#">Lene</a>
      </p>
      <nav>
        <ul role="list">
          <li>
            <a href="#">RSS Feed</a>
          </li>
          <li>
            <a href="#">Follow</a>
          </li>
        </ul>
      </nav>
      <p>Crafted with semantic HTML.</p>
    </footer>
  </div>
</body>
```

{% endraw %}

### El sistema de grid principal

Primero, defino las dimensiones para El wrapper.

```css
.wrapper {
  inline-size: clamp(16rem, 93vw, 120rem);
  margin-inline: auto;
  position: relative;
}
```

Este wrapper es para dar cabida a mi sistema de grid en toda la p√°gina. Sin embargo, quiero dejar mi clase envoltorio intacta, s√≥lo debe ocuparse de lo que su nombre implica.

Mi elemento `<body>` tiene un elemento `child` directo, mi wrapper. Utilizo este selector para definir el s√≠stema grid por separado (una nueva clase con el nombre correspondiente tambi√©n ser√≠a una opci√≥n).

```css
body > div {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
}
```

El wrapper se divide ahora en cuatro columnas del mismo tama√±o, que se colocan directamente una al lado de la otra sin espacio entre ellas.

{% codepen "https://codepen.io/madrilene/pen/yLZoZgE", "result" %}
subgrid con l√≠neas: por defecto
{% endcodepen %}

El wrapper tiene tres elementos `child`, que ahora se colocan cada uno en las tres primeras columnas. Este es su comportamiento natural ya que son elementos `child` de un grid y se dividen a s√≠ mismos en los carriles disponibles.

### Activar subgrid

Quiero que los tres hitos conserven el grid padre para s√≠ mismos.

**¬°Activemos subgrid!**

```css
:is(header, main, footer).landmark {
  display: grid;
  grid-template-columns: subgrid;
}
```

Esto no funciona todav√≠a. Puedo ver en las herramientas de desarrollo que la subgrid est√° activo, pero los tres todav√≠a est√°n atrapados en una columna.

{% imagePlaceholder "./src/assets/images/blog/subgrid-devtools.jpg", "", "", "", "Fragmento del DOM de las herramientas de desarrollo de Firefox. Muestra el elemento body del documento y su elemento hijo, un div con clase wrapper. Los tres 'landmarks' header, main y footer est√°n subordinados a √©ste. El wrapper est√° etiquetado como grid, los tres 'landmarks' como subgrid.", "Captura de pantalla de la pesta√±a inspector de las herramientas para desarrolladores de Firefox" %}

Esto se debe a que siguen siendo elementos `hijos` directos del s√≠stema grid padre.

En cambio, quiero que ocupen todo el ancho del wrapper y, por tanto, especificar√© exactamente qu√© columnas del grid principal deben ocupar:

```css
:is(header, main, footer).landmark {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
}
```

{% codepen "https://codepen.io/madrilene/pen/zYeEJKw", "result" %}
subgrid con lineas: subgrid activada
{% endcodepen %}

Ahora nuestros tres puntos de referencia se apoderan del grid antecesora y colocan a sus propios hijos en ella. S√≥lo `<main>` se extiende por todas las columnas, pero a√∫n as√≠ s√≥lo ordena sus elementos en la primera columna. Llegaremos a eso en un momento.

Si echo un vistazo a las herramientas de desarrollo, tambi√©n puedo ver que se han creado tres filas autom√°ticamente.

Merece la pena echar un vistazo a las herramientas de desarrollo del grid: En Firefox, cuando la p√°gina contiene un grid con un subgrid, la entrada de la subgrid aparece sangrada bajo su principal en la secci√≥n del grid superpuesta.

{% imagePlaceholder "./src/assets/images/blog/subgrid-devtools-details.jpg", "", "", "", "Captura de pantalla que muestra las casillas de verificaci√≥n del grid superpuesta y los ajustes de visualizaci√≥n del grid para hacer visibles las l√≠neas de un subgrid o del grid principal. El grid envolvente est√° seleccionado.", "Captura de pantalla de las herramientas para desarrolladores de Firefox: Panel CSS, vista Dise√±o, secci√≥n grid" %}

{% aside %}Si quieres saber m√°s sobre esto: [Firefox docs for the CSS Grid Inspector, chapter "Examine grid layouts"](https://firefox-source-docs.mozilla.org/devtools-user/page_inspector/how_to/examine_grid_layouts/index.html).{% endaside %}

## Colocaci√≥n de elementos en el grid

Por defecto, los elementos hijo se colocan en la primera l√≠nea disponible del grid

### header

Por ahora no tengo que preocuparme del elemento `anchor` en el `<header>`.
Pero de acuerdo con el dise√±o, el SVG debe alinearse con la cuarta l√≠nea del grid. Logro esto alineando generalmente a la √∫ltima l√≠nea de la columna:

```css
header.landmark svg {
  grid-column-start: -1;
}
```

### main

Mientras que `<main>` es un subgrid, su hijo `<article>` no lo es: el entorno de flujo por defecto est√° en su lugar. Por alguna raz√≥n tuve la sensaci√≥n de que deber√≠a usar los valores de subgrid con moderaci√≥n. Pero en realidad no hay ninguna raz√≥n para ello. As√≠ que convierto todos los elementos `<article>` que son hijos directos de `<main>` en subgrids tambi√©n.

```css
main.landmark > article {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
}
```

{% aside %}Debe tenerse en cuenta que los elementos de art√≠culo seleccionados _no_ son subgrids de `<main>`, sino siempre del elemento antepasado m√°s cercano que defina una plantilla de columna que _no_ sea subgrid. Esa es nuestro wrapper, seleccionada mediante `body > div`.{% endaside %}

Mirando el dise√±o, el t√≠tulo y el p√°rrafo del `<article>` no deben colocarse en el flujo normal del grid, sino que cada uno ocupa su propia fila dentro de la primera columna. Hago que el p√°rrafo ocupe su propia fila dentro de la misma columna.

```css
main.landmark > article > p {
  grid-row: 2;
}
```

Las secciones de `<main>` est√°n distribuidas en diferentes columnas en el dise√±o del escritorio. Ahora las coloco expl√≠citamente en la fila y columna que se les ha asignado. En nuestro ejemplo, s√≥lo hay secciones dentro de `main.landmark`, pero teniendo en cuenta la compatibilidad futura, `<main>` dar√° cabida a m√°s elementos `<article>` en un HTML m√°s extendido.

```css
article.work > section:first-of-type {
  grid-column: 2 / -1;
  grid-row: 3;
}

article.work > section:nth-of-type(2) {
  grid-column: 3 / -1;
  grid-row: 4;
}

article.work > section:nth-of-type(3) {
  grid-column: span 1 / -1;
  grid-row: 5;
}

article.work > section:last-of-type {
  grid-column: 3 / -1;
  grid-row: 6;
}
```

### footer

Tambi√©n quiero colocar elementos en su propia fila en el `<footer>`. Puedo definir esta fila extra directamente en el landmark, y adem√°s del subgrid definido anteriormente, obtiene su propio valor `grid-template-rows`.

{% aside %}¬°Ten en cuenta que tambi√©n se pueden crear subgrids para `grid-template-rows`!
No llegar√© tan lejos en este ejemplo, pero es muy √∫til para crear elementos que necesitan su propio dise√±o de filas repetidas dentro de su columna asignada.{% endaside %}

Se supone que el primer elemento hijo se extender√° sobre dos columnas y filas, el men√∫ y el √∫ltimo pragrafo se alinear√°n uno debajo del otro a la derecha.

```css
footer.landmark {
  grid-template-rows: repeat(2, auto);
}

footer.landmark p:first-of-type {
  grid-column: span 2;
  grid-row: 1 / -1;
}

footer.landmark p:last-of-type,
footer.landmark nav {
  grid-column: span 2 / -1;
  place-self: end;
}
```

`repeat(2, auto)` significa que habr√° dos filas en el grid, y ambas deber√°n tener la misma altura, determinada din√°micamente en funci√≥n de su contenido.
auto" indica que la altura de las filas se ajustar√° autom√°ticamente a su contenido.

{% codepen "https://codepen.io/madrilene/pen/qBgXwrK", "result" %}
subgrid con l√≠neas: colocando elementos
{% endcodepen %}

## L√≠neas del grid coloreadas

Nuestros elementos est√°n alineados, pasemos a la parte que a priori parece sencilla: las columnas de nuestra maquetaci√≥n deben estar marcadas por l√≠neas divisorias de colores. ¬øNo puedo simplemente colorear las l√≠neas del grid?

Mi idea original en realidad era, a√±adir de alguna manera un color a las l√≠neas del grid de la columna en El wrapper en el fondo.

Eso no funciona. Puedo mostrar las l√≠neas en las herramientas de desarrollo, pero no parece que tenga una manera de abordar realmente estas l√≠neas con un color, usando CSS. Sin embargo, he encontrado algunos enfoques en la naturaleza (En otras palabras: Stack Overflow, tambi√©n me atrev√≠ a preguntar Chat GTP, pero eso fue completamente in√∫til). Los enfoques no fueron creados con subgrid en mente, pero intentarlo no hace da√±o.

### Idea 1: A√±adir un hueco y un color de fondo del grid principal

Intentemos a√±adir un `gap` de 1px y un `background-color` pardel grid principal.

```css
body > div {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  background-color: blue;
  gap: 1px;
}
```

A continuaci√≥n, se asigna a las subgrids el color de fondo predeterminado.

```css
:is(header, main, footer).landmark,
main.landmark > article {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
  background-color: white;
}
```

{% codepen "https://codepen.io/madrilene/pen/WNPEPwE", "result" %}
subgrid con lineas: gap y color de fondo
{% endcodepen %}

Bueno, eso s√≥lo funcion√≥ a medias. Las filas creadas intr√≠nsecamente del grid principal son de color azul, pero como los contenedores de la subgrid abarcan todas las columnas, los huecos ya no son visibles.

### Idea 2: border-color

¬øPuedo asignar un borde a todos los elementos del grid?

```css
body > div > * {
  border-inline-start: 1px solid blue;
}

body > div > *:last-of-type {
  border-inline-end: 1px solid blue;
}
```

Ahora mi grid principal tiene un borde a la derecha y a la izquierda, porque son las zonas que no est√°n superpuestas.

¬øY si repito esto para las subgrids?

```css
:is(header, main, footer).landmark > *,
main.landmark > article > * {
  border-inline-start: 1px solid blue;
}

:is(header, main, footer).landmark > *:last-of-type,
main.landmark > article > *:last-of-type {
  border-inline-end: 1px solid blue;
}
```

Ahora tengo un caos de l√≠neas verticales, dobladas a los lados, porque el borde s√≥lo se aplica donde hay elementos.

{% codepen "https://codepen.io/madrilene/pen/xxMLQQr", "result" %}
subgrid con lineas: borde
{% endcodepen %}

### Idea 3: background-image: linear-gradient

Con este planteamiento, me despido del intento de dirigirme directamente del grid.

Record√© que podr√≠a colocar un [patr√≥n CSS](https://projects.verou.me/css3patterns/#vertical-stripes) repetido en el fondo, ya que las cuatro columnas son totalmente uniformes. Esto ser√≠a como una capa gr√°fica que s√≥lo intenta replicar las columnas de mi grid.

Tras un poco de ensayo y error, me decid√≠ por esta variante:

```css
body > div {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  background-image: linear-gradient(to right, blue 1px, transparent 1px);
  background-size: 24.95%;
  background-repeat: repeat;
}
```

Eso es establecer un gradiente lineal para la propiedad `background-image`, creando un patr√≥n repetitivo de una l√≠nea azul de 1 p√≠xel sobre un fondo transparente, y cubriendo el 24,95% del ancho del contenedor. Perd√≥n por el n√∫mero aleatorio (tambi√©n llamado "[n√∫mero m√°gico](<https://es.wikipedia.org/wiki/N%C3%BAmero_m%C3%A1gico_(inform%C3%A1tica)>)", como he aprendido de [Christopher Kirk-Nielsen](https://mastodon.social/@chriskirknielsen/111416719319408777)).

{% codepen "https://codepen.io/madrilene/pen/ExrvBYa", "result" %}
subgrid con lineas: linear-gradient
{% endcodepen %}

Es algo "hacky" y ligeramente fuera, pero lo suficientemente bueno por ahora. Estoy bastante seguro de que todav√≠a voy a cambiarlo, ya que no produce un buen resultado en todos los viewport.

Esta no es una soluci√≥n satisfactoria - Espero que alguien va a venir con una idea mejor y h√°gamelo saber acerca de √©l üò¨

Es bastante "hacky" y muestra una clara desviaci√≥n del grid en los dispositivos m√≥viles. Estoy bastante segura de que todav√≠a voy a cambiarlo, ya que no produce un resultado agradable en cada viewport.
De hecho, espero que a alguien se le ocurra una idea mejor y me la comunique üò¨.

## Actualizaci√≥n: Ideas de la comunidad CSS

Compart√≠ el art√≠culo en Mastodon y, como esperaba, gente con talento aport√≥ nuevas ideas! üéâ

### linear-gradient sin n√∫mero m√°gico

[Christopher Kirk-Nielsen](https://chriskirknielsen.com/) se encarg√≥ de mi problema con los n√∫meros m√°gicos, transformando mi soluci√≥n en una mucho m√°s limpia:

```css
body > div {
  --cols: 4;
  --line-size: 1px;
  display: grid;
  grid-template-columns: repeat(var(--cols), 1fr);
  background-image: linear-gradient(to right, blue var(--line-size), transparent 0);
  background-size: calc((100% - var(--line-size)) / var(--cols));
}
```

Puso el n√∫mero de columnas y el `line-width` en variables y calcul√≥ el ancho deseado a partir de ah√≠. Lo bueno es que ahora hay una relaci√≥n entre eg grid y el patr√≥n, y podemos ajustar din√°micamente el grosor de la l√≠nea (`--line-size`), y el n√∫mero de columnas (`--cols`) - se aplicar√°n tanto para el sistema de grid subyacente como para las l√≠neas visibles.

{% codepen "https://codepen.io/chriskirknielsen/pen/JjxOGEr", "result" %}
subgrid con l√≠neas: linear-gradient (sin n√∫mero m√°gico)
{% endcodepen %}

Eso es fant√°stico, gracias! üíö

### Pseudoelementos

[Roma Komarov](https://kizu.dev/) ha a√±adido la idea de crear elementos vac√≠os adicionales como marcadores de posici√≥n y pseudoelementos como l√≠neas de grid.

Roma aplica pseudoelementos CSS antes de los hijos del elemento `<article>` y despu√©s del propio elemento `<article>`.

```css
article > *::before,
article::after {
  contenido: '';
  position: absolute;
  /* Omitir intencionadamente el inset-inline, utilizando la posici√≥n "inicial" de estos elementos */
  inset-block: 0;
  anchura: 1px;
  color de fondo: azul;
  z-index: -1;
}

article::after {
  derecha: 0;
}
```

Roma observa que este m√©todo genera m√°s l√≠neas de las necesarias: cuando hay elementos que empiezan en las mismas l√≠neas del grid, se solapan, lo que se hace visible al a√±adir un valor de `opacity`:

```css
article > *::before,
article::after {
  /* todas las dem√°s declaraciones CSS */
  opacidad: 0.1;
}
```

{% codepen "https://codepen.io/kizu/pen/MWLOaxW", "result" %}
subgrid con l√≠neas: pseudo-elementos
{% endcodepen %}

Me encanta esta idea, ¬°gracias! üíö

Roma recomienda colocar elementos vac√≠os en el grid, ya que cualquier cambio en las posiciones actuales de los hijos de `<article>` en el grid puede hacer desaparecer las l√≠neas. Vamos a hacer esto en la siguiente secci√≥n.

### Marcadores de posici√≥n implementados, vista m√≥vil

Tom√© la idea de Roma e implement√© los marcadores de posici√≥n en otro codepen, y tambi√©n a√±ad√≠ un media query para la mayor√≠a de los elementos colocados en la rejilla, para hacerlos abarcar todo el ancho en dispositivos m√≥viles (y conseguir que las l√≠neas "funcionen" tambi√©n en viewports peque√±os).

No quiero aburrir a nadie y no voy a repetir todos los ajustes CSS aqu√≠, si quieres saber los detalles, echa un vistazo al Codepen:

{% codepen "https://codepen.io/madrilene/pen/NWowaov", "result" %}
subgrid con lineas: pseudo-elementos, placeholders y media query
{% endcodepen %}

## Actualizaci√≥n 2: El enfoque de Josh Comeau

Unos d√≠as despu√©s, Josh Comeau public√≥ uno de sus elaborados art√≠culos, _An Interactive Guide to CSS Grid_. All√≠ no entra en subgrid, pero [resuelve mi problema](https://www.joshwcomeau.com/css/interactive-guide-to-grid/#grid-construction-3).

Para ilustrar mejor sus ejemplos, enfatiza las l√≠neas invisibles del grid. Su enfoque es similar al de Roma: En el contexto de los pseudoelementos no trabaja con `background-color`, sino con `border-left` (`border-right` funcionar√≠a igual). Tambi√©n resuelve el problema de la superposici√≥n de las l√≠neas de la cuadr√≠cula.

Su soluci√≥n tiene un caso de uso diferente, as√≠ que pude simplificar su versi√≥n.
Apliqu√© esto al √∫ltimo ejemplo con los marcadores de posici√≥n vac√≠os (mantuve las l√≠neas discontinuas de Josh para hacer m√°s visible la diferencia con la soluci√≥n anterior):

```css
div.placeholder > *::before,
div.placeholder::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  border-left: 2px dashed blue;
}

div.placeholder::after {
  right: 0;
}
```

{% codepen "https://codepen.io/madrilene/pen/yLZjKzb", "result" %}
subgrid with lines: Josh Comeau's pseudo-element borders
{% endcodepen %}

## M√°s sobre subgrid

1. Cl√°sico: [mdn](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_grid_layout/Subgrid)
2. Rachel Andrew con grandes ejemplos en su [art√≠culo para 12 Days of Web, edici√≥n 2022](https://12daysofweb.dev/2022/css-subgrid/)
3. [Art√≠culo en web.dev](https://web.dev/articles/css-subgrid), basado en la idea de un grid "macro" a nivel de p√°gina
4. Se pueden encontrar grandes ejemplos de subgrid en [gridbyexample.com](https://gridbyexample.com/examples/#css-grid-level-2-examples)
5. ["Learn CSS Subgrid"](https://ishadeed.com/article/learn-css-subgrid/) por Ahmad Shadeed
6. [Michelle Barker introduce subgrid](https://www.youtube.com/watch?v=tueTFd2TQUA&t=2266s) en su "Creative CSS Layout" en CSS Day 2022 (YouTube)
7. .. y un libro: [CSS - The Definitive Guide](https://www.oreilly.com/library/view/css-the-definitive/9781098117603/)

Mi compa√±ero se ri√≥ cuando me vio sentado delante del ordenador con un libro t√©cnico, de la vieja escuela. En realidad, aqu√≠ es donde primero miro cuando quiero aprender o saber algo sobre CSS. Hay m√°s de 80 p√°ginas s√≥lo sobre dise√±o de cuadr√≠cula, y lo recomiendo encarecidamente. Por supuesto, no es barato y ocupa una cantidad notablemente grande de espacio en la estanter√≠a.

{% imagePlaceholder "./src/assets/images/blog/css-definitive-guide-grid.jpg", "", "", "", "El libro CSS - The Definitive Guide yace abierto en mi escritorio en un cap√≠tulo sobre subgrid, con mi teclado detr√°s. " %}
